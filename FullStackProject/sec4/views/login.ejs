<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>Login Page</title>
 <!-- Bootstrap CSS -->
 <link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet">
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
 <style>
  body {
   background-color: #ffffff;
   min-height: 100vh;
   margin: 0;
  }
  .split-container {
   display: flex;
   min-height: 100vh;
  }
  .left-panel {
   flex: 0 0 65%;
   background-color: #ffffff;
   position: relative;
   overflow: hidden;
   display: flex;
   align-items: center;
   justify-content: center;
   padding: 4rem 2rem;
  }
  /* mirrored background image without flipping content */
  .left-panel::before {
   content: "";
   position: absolute;
   inset: 0;
   background-image: url('/login_background.jpg');
   background-size: cover;
   background-position: center;
   background-repeat: no-repeat;
   transform: scaleX(-1);
  }
  .right-panel {
   flex: 0 0 35%;
   background: rgb(6, 40, 0);
   color: #ffffff;
   display: flex;
   align-items: center;
   justify-content: center;
   padding: 4rem 2rem;
   text-align: center;
  }
  .login-card {
   max-width: 700px;
   width: 100%;
   padding: 2rem;
   border-radius: 1rem;
   box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
   background-color: #fff;
   position: relative;
   z-index: 1; /* keep above mirrored background */
  }
  /* Slightly narrower fields/button than the card */
  .form-width {
   width: min(92%, 420px);
   margin: 0 auto;
  }
  h3.login-title {
   font-family: 'DM Serif Display', serif;
    letter-spacing: clamp(0.1rem, 0.3vw, 0.5rem);
    font-size: clamp(2.25rem, 3.5vw, 2.75rem);
   color: rgb(3, 19, 0);
  }
  .hero-copy {
   max-width: 520px;
  }
  .hero-welcome {
   font-family: 'DM Serif Display', serif;
   letter-spacing: clamp(0.25rem, 0.8vw, 0.75rem);
   font-size: clamp(2rem, 5vw, 3.5rem);
   margin: 0 0 2rem 0;
  }
  .hero-title {
   font-weight: bold;
   letter-spacing: clamp(0.25rem, 0.8vw, 0.75rem);
   text-transform: uppercase;
   font-size: clamp(0.875rem, 2.5vw, 1.25rem);
   margin-bottom: 1rem;
  }
  .hero-subtext {
   font-size: clamp(1rem, 1.5vw, 1.125rem);
   line-height: 1.6;
   opacity: .95;
  }
  .form-control:focus {
   border-color: #7bc47f;
   box-shadow: 0 0 0 .25rem rgba(123, 196, 127, .35);
  }
  .form-control:hover {
   border-color: #7bc47f;
  }
  /* Keep Bootstrap button green across hover/focus/active using CSS variables */
  .btn-primary {
   --bs-btn-bg:  rgb(6, 40, 0);
   --bs-btn-border-color:  rgb(6, 40, 0);
   --bs-btn-hover-bg: #0f4d1c;
   --bs-btn-hover-border-color: #0f4d1c;
   --bs-btn-active-bg: #0c3d16;
   --bs-btn-active-border-color: #0c3d16;
   --bs-btn-focus-shadow-rgb: 15, 77, 28; /* green-ish focus ring */
   background-color: var(--bs-btn-bg);
   border-color: var(--bs-btn-border-color);
  }
  .btn-primary:hover,
  .btn-primary:focus,
  .btn-primary:active,
  .btn-primary:focus-visible {
   background-color: var(--bs-btn-hover-bg);
   border-color: var(--bs-btn-hover-border-color);
  }

  /* Responsive */
  @media (max-width: 992px) {
   .split-container {
    flex-direction: column;
   }
   .left-panel, .right-panel {
    flex: 0 0 auto;
    width: 100%;
    padding: 3rem 1.25rem;
   }
   .right-panel {
    order: 2; /* keep the form on top, hero below */
   }
  }
  @media (max-width: 576px) {
   .login-card {
    padding: 1.5rem;
   }
   .hero-title { letter-spacing: .1rem; }
   .form-width { width: 100%; }
  }
 </style>
</head>
<body>
 <div class="split-container">
  <section class="left-panel">
   <div class="login-card">
    <h3 class="login-title text-center mb-4">Member Login</h3>
    <% if (typeof error_message !== 'undefined' && error_message) { %>
     <div class="alert alert-danger" role="alert"><%= error_message %></div>
    <% } %>
    <br>
    <form id="login-form" method="POST" action="/login">
     <div class="form-width">
      <div class="mb-3">
       <label for="username" class="form-label">Username</label>
       <input type="text" id="username" name="username" class="form-control" required autofocus>
      </div>
      <div class="mb-3">
       <label for="password" class="form-label">Password</label>
       <input type="password" id="password" name="password" class="form-control" required>
      </div>
      <div class="d-grid">
       <button type="submit" class="btn btn-primary">Login</button>
      </div>
     </div>
    </form>

   <div id="signup-toggle-container" class="text-center mt-4">
     <button id="show-signup" type="button" class="btn btn-link" style="color: rgb(3, 19, 0); text-decoration: none;">Create an account</button>
    </div>

    <form id="signup-form" method="POST" action="/signup" style="display:none;">
     <div class="form-width">
      <div class="row g-3">
       <div class="col-12 col-sm-6">
        <label for="firstName" class="form-label">First name</label>
        <input type="text" id="firstName" name="firstName" class="form-control" required>
       </div>
       <div class="col-12 col-sm-6">
        <label for="lastName" class="form-label">Last name</label>
        <input type="text" id="lastName" name="lastName" class="form-control" required>
       </div>
      </div>
      <div class="mb-3 mt-3">
       <label for="phone" class="form-label">Phone number</label>
       <input type="tel" id="phone" name="phone" class="form-control" placeholder="###-###-####" pattern="[0-9\-\s\(\)]{7,}" required>
      </div>
      <div class="mb-3">
       <label for="email" class="form-label">Email</label>
       <input type="email" id="email" name="email" class="form-control" required>
      </div>
      <div class="mb-3">
       <label for="newUsername" class="form-label">Username</label>
       <input type="text" id="newUsername" name="username" class="form-control" required>
      </div>
      <div class="mb-3">
       <label for="newPassword" class="form-label">Password</label>
       <input type="password" id="newPassword" name="password" class="form-control" required>
      </div>
      <div class="d-grid">
       <button type="submit" class="btn btn-primary">Sign Up</button>
      </div>
      <div class="text-center mt-3">
       <button type="button" id="back-to-login" class="btn btn-link" style="color: rgb(3, 19, 0); text-decoration: none;">Back to login</button>
      </div>
     </div>
    </form>
   </div>
  </section>
  <section class="right-panel">
   <div class="hero-copy">
    <div class="hero-welcome">Welcome</div>
    <h1 class="hero-title">Hillcrest 8th Ward Elders Quorum</h1>
    <p class="hero-subtext">This site helps you stay connected with Elders Quorumâ€”announcements, quick surveys, and resources designed to support ministering and draw closer to Jesus Christ.</p>
   </div>
  </section>
 </div>
 <!-- Bootstrap JS -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
 <script>
  // Toggle between login and signup forms
  (function(){
    const showSignupBtn = document.getElementById('show-signup');
    const backToLoginBtn = document.getElementById('back-to-login');
    const signupToggle = document.getElementById('signup-toggle-container');
    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    if (showSignupBtn && backToLoginBtn && signupToggle && loginForm && signupForm) {
      showSignupBtn.addEventListener('click', function(){
        signupToggle.style.display = 'none';
        loginForm.style.display = 'none';
        signupForm.style.display = 'block';
      });
      backToLoginBtn.addEventListener('click', function(){
        signupForm.style.display = 'none';
        loginForm.style.display = 'block';
        signupToggle.style.display = 'block';
      });
    }
  })();
 </script>
</body>
</html>